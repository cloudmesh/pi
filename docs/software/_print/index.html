<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.79.1"><link rel=canonical type=text/html href=https://cloudmesh.github.io/pi/docs/software/><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel="shortcut icon" href=/pi/favicons/favicon.ico><link rel=apple-touch-icon href=/pi/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/pi/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/pi/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/pi/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/pi/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/pi/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/pi/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/pi/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/pi/favicons/android-192x192.png sizes=192x192><title>Software | Cloudmesh Cluster Pi Planet</title><meta property="og:title" content="Software"><meta property="og:description" content="Software collection for a variety of Raspberry PI general and special purpose clusters."><meta property="og:type" content="website"><meta property="og:url" content="https://cloudmesh.github.io/pi/docs/software/"><meta property="og:site_name" content="Cloudmesh Cluster Pi Planet"><meta itemprop=name content="Software"><meta itemprop=description content="Software collection for a variety of Raspberry PI general and special purpose clusters."><meta name=twitter:card content="summary"><meta name=twitter:title content="Software"><meta name=twitter:description content="Software collection for a variety of Raspberry PI general and special purpose clusters."><link rel=preload href=/pi/scss/main.min.4aec00cbc82dae02258a2ba135990358146339f666dc47346f0f1e49d7a6fa42.css as=style><link href=/pi/scss/main.min.4aec00cbc82dae02258a2ba135990358146339f666dc47346f0f1e49d7a6fa42.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/pi/><span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zM197.0804 232.033c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zM197.0804 177.6188c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zM197.5309 286.4723c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zM197.0804 340.5784c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Cloudmesh Cluster Pi Planet</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/pi/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/pi/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/pi/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/pi/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/pi/tutorial/><span>Tutorials</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This the multi-page printable view of this section.
<a href=# onclick="print();return false;">Click here to print</a>.</p><p><a href=/pi/docs/software/>Return to the regular view of this page</a>.</p></div><h1 class=title>Software</h1><div class=lead>Software collection for a variety of Raspberry PI general and special purpose clusters.</div><ul><li>1: <a href=#pg-155020c79129edefd4e9be40cde3c474>Autogenerating Analytics Rest Services</a></li><ul></ul><li>2: <a href=#pg-482e1019e2a809f04dbabd8c30004471>Link Collection abut PI Clusters and Parts</a></li><li>3: <a href=#pg-e91533906ee93d604b0cb1abe661a741>Cloudmesh Pi Burner</a></li><ul></ul><li>4: <a href=#pg-117e294ab08651d2b766fb38d9b775c8>Fortan</a></li><li>5: <a href=#pg-5e1c474153f0a656bff00af9fe4ad500>Kubernetes</a></li><li>6: <a href=#pg-54548d350555c4e237eb3dcc9c0aa01c>Motherboard LED</a></li><li>7: <a href=#pg-1cc7ff8c61beb4e85aade65b6717fe70>Run at Boot</a></li></ul><div class=content><div class="pageinfo pageinfo-primary"><p>Here we collect some software that relates to cluster computing and PI&rsquo;s.</p></div></div></div><div class=td-content><h1 id=pg-155020c79129edefd4e9be40cde3c474>1 - Autogenerating Analytics Rest Services</h1><div class=lead>In this section, we will deploy a Pipeline Anova SVM API on an openapi service using cloudmesh-openapi</div><div class="pageinfo pageinfo-primary"><p><strong>Learning Objective</strong></p><p>We will learn to create a REST service automatically from pyton functionsq with the
help of cloudmesh-openapi. We use as example a Pipeline Anova SVM from which we generate
an openapi server, and subsequently train the model
with data and make predictions from said data. All code needed for
this is provided in the <a href=https://github.com/cloudmesh/cloudmesh-openapi>cloudmesh-openapi</a>
repository. The code is largely based on this
<a href=https://scikit-learn.org/stable/auto_examples/feature_selection/plot_feature_selection_pipeline.html>sklearn example</a>. This
includes</p><ul><li>Training ML models with stateless requests</li><li>Generating RESTful APIs using <code>cms openapi</code> for existing python code</li><li>Deploying openapi definitions onto a localserver</li><li>Interacting with newly created openapi services</li></ul><p><strong>Topics Covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#1-prerequisite>1. Prerequisite</a></li><li><a href=#2-the-python-code>2. The Python Code</a></li><li><a href=#3-generating-the-openapi-yaml-file>3. Generating the OpenAPI YAML file</a></li><li><a href=#4-the-openapi-yaml-file-optional>4. The OpenAPI YAML File (optional)</a></li><li><a href=#5-starting-the-server>5. Starting the Server</a></li><li><a href=#6-interacting-with-the-endpoints>6. Interacting With the Endpoints</a><ul><li><a href=#61-uploading-the-dataset>6.1 Uploading the Dataset</a></li><li><a href=#62-training-on-the-dataset>6.2 Training on the Dataset</a></li><li><a href=#63-making-predictions>6.3 Making Predictions</a></li></ul></li><li><a href=#7-clean-up-optional>7. Clean Up (optional)</a></li><li><a href=#8-assignments>8. Assignments</a></li><li><a href=#9-references>9. References</a></li></ul></nav></div></div><h2 id=1-prerequisite>1. Prerequisite</h2><p>It is also assumed that the user has installed and has familiarity with the following:</p><ul><li>Install cloudmesh-openapi using the developer install as documented <a href=https://github.com/cloudmesh/cloudmesh-openapi>here</a></li><li>Python 3.8.x</li><li>Linux Command line</li><li>Working in a python environment</li></ul><h2 id=2-the-python-code>2. The Python Code</h2><p>First, let us ensure we are in the correct directory. If you followed
the cloudmesh-openapi installation directions as dictated in the
<a href=https://github.com/cloudmesh/cloudmesh-openapi>installation guide</a>,
simply navigate to the root directory of <code>cloudmesh-openapi</code>. Notice
how we are still working in our python virtual environment <code>ENV3</code> from
the installation guide.</p><pre><code>(ENV3) &gt; pwd
~/cm/cloudmesh-openapi
</code></pre><p>Let us take a look at the PipelineAnova SVM example code.</p><p>A
<a href=https://scikit-learn.org/stable/modules/generated/sklearn.pipeline.Pipeline.html>Pipeline</a>
is a <em>pipeline</em> of transformations to apply with a final
estimator. Analysis of variance
(<a href=https://en.wikipedia.org/wiki/Analysis_of_variance>ANOVA</a>) is used
for feature selection. A Support vector machine
<a href=https://en.wikipedia.org/wiki/Support_vector_machine>SVM</a> is used as
the actual learning model on the features.</p><p>Use your favorite editor to look at it (whether it be vscode, vim,
nano, etc). We will use emacs</p><pre><code>(ENV3) &gt; emacs ./tests/Scikitlearn-experimental/sklearn_svm.py
</code></pre><p>The class within this file has two main methods to interact with (except for
the file upload capability which is added at runtime)</p><pre><code>@classmethod
def train(cls, filename: str) -&gt; str:
    &quot;&quot;&quot;
    Given the filename of an uploaded file, train a PipelineAnovaSVM
    model from the data. Assumption of data is the classifications 
    are in the last column of the data.

    Returns the classification report of the test split
    &quot;&quot;&quot;
    # some code...

@classmethod
def make_prediction(cls, model_name: str, params: str):
    &quot;&quot;&quot;
    Make a prediction based on training configuration
    &quot;&quot;&quot;
    # some code...
</code></pre><p>Note the parameters that each of these methods takes in. These
parameters are expected as part of the stateless request for each
method.</p><h2 id=3-generating-the-openapi-yaml-file>3. Generating the OpenAPI YAML file</h2><p>Let us now use the python code from above to create the openapi YAML
file that we will deploy onto our server. To correctly generate this
file, use the following command:</p><pre><code>(ENV3) &gt; cms openapi generate PipelineAnovaSVM 
    \ --filename=./tests/Scikitlearn-experimental/sklearn_svm.py
    \ --import_class
    \ --enable_upload
</code></pre><p>Let us digest the options we have specified:</p><ul><li><code>--filename</code> indicates the path to the python file in which our code
is located</li><li><code>--import_class</code> notifies <code>cms openapi</code> that the YAML file is generated
from a class. The name of this class is specified as
<code>PipelineAnovaSVM</code></li><li><code>--enable_upload</code> allows the user to upload files to be stored on
the server for reference. This flag causes <code>cms openapi</code> to
auto-generate a new python file with the <code>upload</code> method appended to
the end of the file. For this example, you will notice a new file
has been added in the same directory as <code>sklearn_svm.py</code>. The file
is aptly called: <code>sklearn_svm_upload-enabled.py</code></li></ul><h2 id=4-the-openapi-yaml-file-optional>4. The OpenAPI YAML File (optional)</h2><p>If Section 2 above was correctly, cms will have generated the
corresponding openapi YAML file. Let us take a look at it.</p><pre><code>(ENV3) &gt; emacs ./tests/Scikitlearn-experimental/sklearn_svm.yaml
</code></pre><p>This YAML file has a lot of information to digest. The basic structure
is documented
<a href=https://swagger.io/docs/specification/basic-structure/>here</a>. However,
it is not necessary to understand this information to deploy RESTful
APIs.</p><p>However, take a look at <code>paths:</code> on line 9 in this file. Under this
section, we have several different endpoints for our API
listed. Notice the correlation between the endpoints and the python
file we generated from.</p><h2 id=5-starting-the-server>5. Starting the Server</h2><p>Using the YAML file from Section 2, we can now start the server.</p><pre><code>(ENV3) &gt; cms openapi server start ./tests/Scikitlearn-experimental/sklearn_svm.yaml
</code></pre><p>The server should now be active. Navigate to
<a href=http://localhost:8080/cloudmesh/ui>http://localhost:8080/cloudmesh/ui</a>.</p><p><img src=cloudmesh_ui.png alt=Unavailable></p><h2 id=6-interacting-with-the-endpoints>6. Interacting With the Endpoints</h2><h3 id=61-uploading-the-dataset>6.1 Uploading the Dataset</h3><p>We now have a nice user inteface to interact with our newly generated
API. Let us upload the data set. We are going to use the iris data set
in this example. We have provided it for you to use. Simply navigate
to the <code>/upload</code> endpoint by clicking on it, then click Try it out.</p><p>We can now upload the file. Click on Choose File and upload the data
set located at <code>./tests/Scikitlearn-experimental/iris.data</code>. Simply
hit Execute after the file is uploaded. We should then get a <code>200</code>
return code (telling us that everything went ok).</p><p><img src=upload_endpoint.png alt=Unavaialable></p><h3 id=62-training-on-the-dataset>6.2 Training on the Dataset</h3><p>The server now has our dataset. Let us now navigate to the <code>/train</code>
endpoint by, again, clicking on it. Similarly, click <code>Try it out</code>. The
parameter being asked for is the filename. The filename we are
interested in is iris.data. Then click execute. We should get another
<code>200</code> return code with a Classification Report in the Response Body.</p><p><img src=train_endpoint.png alt=Unavailable></p><h3 id=63-making-predictions>6.3 Making Predictions</h3><p>We now have a trained model on the iris data set. Let us now use it to
make predictions. The model expects 4 attribute values: sepal length,
seapl width, petal length, and petal width. Let us use the values
<code>5.1, 3.5, 1.4, 0.2</code> as our attributes. The expected classification is
<code>Iris-setosa</code>.</p><p>Navigate to the <code>/make_prediction</code> endpoint as we have with other
endpoints. Again, let us <code>Try it out</code>. We need to provide the name of
the model and the params (attribute values). For the model name, our
model is aptly called <code>iris</code> (based on the name of the data set).</p><p><img src=make_prediction_endpoint.png alt=Unavailable></p><p>As expected, we have a classification of <code>Iris-setosa</code>.</p><h2 id=7-clean-up-optional>7. Clean Up (optional)</h2><p>At this point, we have created and trained a model using <code>cms openapi</code>. After satisfactory use, we can shut down the server. Let us
check what we have running.</p><pre><code>(ENV3) &gt; cms openapi server ps
openapi server ps

INFO: Running Cloudmesh OpenAPI Servers

...

[{'name': 'sklearn_svm', 'pid': 7496, 'spec': './tests/Scikitlearn-experimental/sklearn_svm.yaml'}]
+-------------+------+--------------------------------------------------+
| name        | pid  | spec                                             |
+-------------+------+--------------------------------------------------+
| sklearn_svm | 7496 | ./tests/Scikitlearn-                             |
|             |      | experimental/sklearn_svm.yaml                    |
+-------------+------+--------------------------------------------------+
</code></pre><p>We can stop the server with the following command:</p><pre><code>(ENV3) &gt; cms openapi server stop sklearn_svm
</code></pre><p>We can verify the server is shut down by running the <code>ps</code> command again.</p><pre><code>(ENV3) &gt; 
openapi server ps

INFO: Running Cloudmesh OpenAPI Servers

[]
None
</code></pre><h2 id=8-assignments>8. Assignments</h2><p>Many ML models follow the same basic process for training and testing:</p><ol><li>Upload Training Data</li><li>Train the model</li><li>Test the model</li></ol><p>Using the PipelineAnovaSVM code as a template, write python code for a
new model and deploy it as a RESTful API as we have done above. Train
and test your model using the provided iris data set. There are plenty
of examples that can be referenced
<a href=https://scikit-learn.org/stable/auto_examples/index.html#>here</a></p><h2 id=9-references>9. References</h2><ul><li><a href=https://scikit-learn.org/stable/>SciKit-Learn: Machine learning in Python, 0.24.1, Feb 2021</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-482e1019e2a809f04dbabd8c30004471>2 - Link Collection abut PI Clusters and Parts</h1><div class=lead>A number of links related to software to use PI&rsquo;s and create clusters.</div><div class="pageinfo pageinfo-primary"><p><strong>Learning Objectives</strong></p><ul><li>Get informed what resources exist</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#software>Software</a><ul><li></li><li><a href=#booting-and-startup>Booting and Startup</a></li><li><a href=#network-of-workstations>Network of Workstations</a></li><li><a href=#slurm>SLURM</a></li><li><a href=#mpi>MPI</a></li><li><a href=#kubernetes>Kubernetes</a></li><li><a href=#network-configurations>Network Configurations</a></li></ul></li></ul></nav></div></div><h2 id=software>Software</h2><h4 id=os>OS</h4><ul><li><a href=https://www.raspberrypi.org/software/>RaspberyOS, 32 bit</a></li><li><a href=https://ubuntu.com/download/raspberry-pi>Ubuntu</a></li><li><a href="https://ubuntu.com/download/raspberry-pi/thank-you?version=20.04.2&architecture=server-arm64+raspi">Ubuntu 20.04 Server, 64bit</a></li><li><a href="https://ubuntu.com/download/raspberry-pi/thank-you?version=20.10&architecture=server-arm64+raspi">Ubuntu 20.10 Server, 64bit</a></li><li><a href="https://ubuntu.com/download/raspberry-pi/thank-you?version=20.10&architecture=desktop-arm64+raspi">Ubuntu 20.10 Desktop, 64bit</a></li></ul><h3 id=booting-and-startup>Booting and Startup</h3><ul><li><a href=https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md>USB mass storage boot, raspberypi.org</a></li><li><a href=https://www.dexterindustries.com/howto/run-a-program-on-your-raspberry-pi-at-startup/>Five Ways to Run a Program On Your Raspberry Pi At Startup</a></li><li><a href=https://www.tomshardware.com/how-to/run-script-at-boot-raspberry-pi>How to Run a Script at Boot on Raspberry Pi, Tom&rsquo;s Hardware</a></li></ul><h4 id=sdcard-creation>SDCard Creation</h4><ul><li><a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md>Cludhmesh Pi Burn</a> Very good for burning multiple cars for clusters with easy setup of a cluster of PIs that are fully connected with each other.</li><li><a href=https://www.raspberrypi.org/blog/raspberry-pi-imager-imaging-utility/>Pi Imager, raspberrypi.org</a> Best suited for burning individuall cards. Requires additional work after burning, such as setting hostname, and enable ssh. Time consuming when setting up a cluster.</li><li><a href=https://www.pibakery.org/>Pi Bakery</a> Easy setup of individual Pis, with the ability to add post instalation information such as Wifi, hostname and others. GUI driven. Not targeted towards Cluster setups.</li></ul><h4 id=pxe-boot>PXE Boot</h4><ul><li><a href=https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net.md>Pi4 Network booting, raspberrypi.org</a></li><li><a href=https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net_tutorial.md>Tutoria Network boot your Raspberry Pig, raspberrypi.org</a></li></ul><h3 id=network-of-workstations>Network of Workstations</h3><ul><li><a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/README.md>Cludhmesh Pi Burn</a> Setting up a cluster of Pis easily including ssh, keys, and networking.</li></ul><h3 id=slurm>SLURM</h3><ul><li><a href="https://www.raspberrypi.org/forums/viewtopic.php?p=1261596#p1261596">Slurm on Pi zero, raspberrypi.org Forum post</a></li></ul><h3 id=mpi>MPI</h3><ul><li><a href=https://magpi.raspberrypi.org/articles/build-a-raspberry-pi-cluster-computer>Build a Raspberry Pi cluster computer, The MagPi magazine</a></li><li><a href=https://thenewstack.io/installing-mpi-python-raspberry-pi-cluster-runs-docker/>Installing MPI for Python on a Raspberry Pi Cluster, The New Stack</a></li><li><a href=https://glmdev.medium.com/building-a-raspberry-pi-cluster-f5f2446702e8>Building a Raspberry Pi Cluster. Part III - OpenMPI, Python, and Parallel, Garrett Mills, Medium</a> Medium requires a subscription if you read more than a small number of articles</li></ul><h3 id=kubernetes>Kubernetes</h3><ul><li>see our special section on kubernetes</li></ul><h3 id=network-configurations>Network Configurations</h3><h4 id=mdns>mDNS</h4><ul><li><a href="https://www.raspberrypi.org/forums/viewtopic.php?t=267113">Going headless with Avahi Zeroconf MDNS (Pi4, maybe Pi 3B, etc) - Raspberry Pi Forums</a></li></ul><h4 id=mesh-network>Mesh Network</h4><ul><li><a href=https://github.com/binnes/WiFiMeshRaspberryPi>Workshop to create a sensor application over a WiFi Mesh network, binnes, GitHub</a>,</li><li><a href=https://www.iottrends.tech/blog/diy-how-to-create-a-home-mesh-wifi-using-raspberry-pi/>DIY: How to Create a Home Mesh WiFi using Raspberry Pi | iotTrends.tech</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-e91533906ee93d604b0cb1abe661a741>3 - Cloudmesh Pi Burner</h1><div class=lead>Create easily preconfigured SDCards to make cluster setups easier.</div><div class="pageinfo pageinfo-primary"><p><strong>Learning Objectives</strong></p><ul><li>Find an easier way to burn multiple SD Cards for clusters with preconfiguration included.</li></ul></div><p><strong>WARNING:</strong> <em>This program is designed for a <strong>Raspberry Pi</strong>. Instructions
to use <strong>Linux</strong> are included in the FAQ. We are working on support for <strong>macOS
and Windows 10</strong>. If you want to help us port to any of these OSes, please
contact <a href=mailto:laszewski@gmail.com>laszewski@gmail.com</a></em></p><p><a href=https://travis-ci.com/github/cloudmesh/cloudmesh-pi-burn><img src="https://travis-ci.com/cloudmesh/cloudmesh-pi-burn.svg?branch=main" alt=image></a>
<a href=https://pypi.org/project/cloudmesh-pi-burn><img src=https://img.shields.io/pypi/pyversions/cloudmesh-pi-burn.svg alt=image></a>
<a href=https://pypi.org/project/cloudmesh-pi-burn/><img src=https://img.shields.io/pypi/v/cloudmesh-pi-burn.svg alt=image></a>
<a href=https://opensource.org/licenses/Apache-2.0><img src=https://img.shields.io/badge/License-Apache%202.0-blue.svg alt=License></a></p><ul><li><a href=#cloudmesh-pi-burner-for-sd-cards>Cloudmesh Pi Burner for SD Cards</a><ul><li><a href=#introduction>Introduction</a></li><li><a href=#nomenclature>Nomenclature</a></li><li><a href=#quickstart-for-bridged-wifi>Quickstart for Bridged WiFi</a><ul><li><a href=#requirements>Requirements</a></li><li><a href=#manager-pi>Manager Pi</a></li><li><a href=#burning-multiple-sd-cards-with-a-single-burner>Burning Multiple SD Cards with a Single Burner</a></li><li><a href=#connecting-pis-to-the-internet-via-bridge>Connecting Pis to the Internet via Bridge</a></li></ul></li><li><a href=#set-up-of-the-ssh-keys-and-ssh-tunnel>Set up of the SSH keys and SSH tunnel</a></li><li><a href=#manual-pages>Manual Pages</a><ul><li><a href=#manual-page-for-the-burn-command>Manual Page for the <code>burn</code> command</a></li><li><a href=#manual-page-for-the-bridge-command>Manual Page for the <code>bridge</code> command</a></li><li><a href=#manual-page-for-the-host-command>Manual Page for the <code>host</code> command</a></li><li><a href=#manual-page-for-the-pi-command>Manual Page for the <code>pi</code> command</a></li></ul></li><li><a href=#faq-and-hints>FAQ and Hints</a><ul><li><a href=#can-i-use-the-leds-on-the-pi-motherboard>Can I use the LEDs on the PI Motherboard?</a></li><li><a href=#how-can-i-use-pycharm-to-edit-files-or-access-files-in-general-from-my-laptop-on-the-pi>How can I use pycharm, to edit files or access files in general from my Laptop on the PI?</a></li><li><a href=#how-can-i-enhance-the-get-script>How can I enhance the <code>get</code> script?</a></li><li><a href=#can-i-use-a-mesh-network-for-the-setup>Can I use a Mesh Network for the setup?</a></li><li><a href=#can-i-use-cms-burn-on-linux>Can I use cms burn on Linux?</a></li><li><a href=#what-packages-do-i-need-to-run-the-info-command-on-macos>What packages do I need to run the info command on macOS</a></li><li><a href=#are-there-any-unit-tests>Are there any unit tests?</a></li><li><a href=#using-pi-imager-to-setup-a-manager-pi-with-headless-access>Using Pi Imager to setup a Manager Pi with headless access</a></li><li><a href=#single-card-burning>Single Card Burning</a></li><li><a href=#how-to-update-firmware>How to update firmware?</a></li><li><a href=#how-to-burn-a-cluster-using-linux>How to burn a cluster using Linux</a></li></ul></li><li><a href=#alternatives>Alternatives</a><ul><li><a href=#what-is-the-status-of-the-implementation>What is the status of the implementation?</a></li></ul></li><li><a href=#how-can-i-contribute-contributing>How can I contribute Contributing</a></li></ul></li></ul><h2 id=introduction>Introduction</h2><p><code>cms burn</code> is a program to burn many SD cards for the preparation of
building clusters with Raspberry Pi&rsquo;s. It allows users to create
readily bootable SD cards that have the network configured and contain a
public ssh key from your machine that you used to configure the
cards. Thus, little setup is needed for a cluster. Another
unique feature is that you can burn multiple cards in a row, each with
their individual setup such as hostnames and ipadresses.</p><h2 id=nomenclature>Nomenclature</h2><ul><li><p>Commands proceeded with <code>pi@mangerpi:$</code> are to be executed on the
Rasperry Pi with the name managerpi.</p></li><li><p>Commands with <code>(ENV3) pi@managerpi:$</code> are to be executed in a virtula ENV
using Python 3 on the Raspberry Pi with the name managerpi</p></li></ul><h2 id=quickstart-for-bridged-wifi>Quickstart for Bridged WiFi</h2><p>To provide you with a glimpse on what you can do with cms burn, we
have provided this quickstart guide that will create one manager PI and
several workers.</p><p>This setup is intended for those who have restricted access to their
home network (ie. cannot access router controls). For example, those
on campus WiFis or regulated apartment WiFis.</p><p>The Figure 1 describes our network configuration. We have 5
Raspberry Pi 4s: 1 manager and 4 workers. We have WiFi access, but we
do not necessarily have access to the router&rsquo;s controls.</p><p>We also have a network switch, where the manager and workers can
communicate locally, but we will also configure the manager to provide
internet access to devices on the network switch via a &ldquo;network
bridge&rdquo;.</p><p><img src=https://github.com/cloudmesh/cloudmesh-pi-burn/raw/main/images/network-bridge.png alt></p><p>Figure 1: Pi Cluster setup with bridge network</p><h3 id=requirements>Requirements</h3><p>For the quickstart we have the following requirements:</p><ul><li><p>SD Cards and Raspberry Pis</p></li><li><p>You will need an SD card writer (USB-A) to burn new
cards We recommend that you invest in a USB 3.0 SDCard writer as they
are significantly faster and you can resuse them on PI'4s</p></li></ul><h3 id=manager-pi>Manager Pi</h3><p>First we need to configure the Manager Pi</p><p><strong>Step 0.</strong> Burn Manager Pi SD Card</p><p>Using <a href=https://www.raspberrypi.org/software/>Raspberry Pi imager</a>, burn an SD card with <em>Raspberry Pi OS (32-bit) with desktop and recommended applications</em>. You may use your normal system to burn such a card
including Windows, macOS, or Linux.</p><p>You will then want a method of accessing this manager Pi. You may either use SSH (recommended) or monitor desktop environment (easiest) to access it. We highly recommend <a href=https://www.raspberrypi.org/documentation/linux/usage/users.md>changing the password</a> on the Pi as soon as you have access. This is because the pi is initialized with default user <code>pi</code> and default password <code>raspberry</code>. This is critical if you are on a shared network where anyone can attempt to access your pi.</p><blockquote><p>Monitor Desktop Environment: You will need a monitor, keyboard, and mouse. This is the easiest approach as Raspberry Pi OS provides a very nice user interface with an easy-to-follow setup process for connecting to WiFi and other such tasks.</p></blockquote><blockquote><p>SSH Environment: You may consider enabling SSH access to your Pi so that you may access the file system from your preferred machine.</p></blockquote><blockquote><p>Headless Configuration: See section 3 of <a href=https://www.raspberrypi.org/documentation/remote-access/ssh/>enabling ssh</a> for instructions on how to enable SSH headlessly. Similarly, <a href=https://raspberrypi.stackexchange.com/questions/10251/prepare-sd-card-for-wifi-on-headless-pi>how to enable WiFi headlessly</a>.
Additionally you can check out the FAQ for step-by-step instructions.
<a href=#using-pi-imager-to-setup-a-manager-pi-with-headless-access>Using Pi Imager to setup a Manager Pi with headless access</a>.</p></blockquote><blockquote><p>Update the firmware: See the FAQ [How to update firmware?]> (#how-to-update-firmware)</p></blockquote><p><strong>Step 1.</strong> Installing Cloudmesh on the Manager Pi</p><p>Open a new terminal screen on the Manager Pi. Here we assume the hostname is <code>managerpi</code>. However, this is of no importance in relation to topics of this guide.</p><p>Update pip. The simple curl command below will generate an ssh-key,
update your system, and install cloudmesh.</p><pre><code>pi@managerpi:~ $ pip install pip -U
pi@managerpi:~ $ curl -Ls http://cloudmesh.github.io/get/pi | sh -                
</code></pre><p>This will take a moment&mldr;</p><p><strong>Step 2.</strong> Reboot</p><p>The installation script updates your system. Reboot for effect.</p><pre><code>pi@managerpi:~ $ sudo reboot
</code></pre><p><strong>Step 3.</strong> Download the latest Raspberry Pi Lite OS</p><p>The following command will download the latest images for Raspberry
Lite OS.</p><pre><code>(ENV3) pi@managerpi:~ $ cms burn image get latest-lite
</code></pre><p>We can verify our image&rsquo;s downloaded with the following.</p><pre><code>(ENV3) pi@managerpi:~ $ cms burn image ls
</code></pre><blockquote><p><strong>Note.</strong> For our cluster we use light, but if you like
to use other versions please see this note.
We can use the following command to list the current
Raspberry Pi OS versions (full and lite)</p><pre><code>(ENV3) pi@managerpi:~ $ cms burn image versions --refresh
</code></pre><p>This will list the Tags and Types of each available OS. We can then
modify the <code>image get</code> command for versions we are interested in. For
example,</p><pre><code>(ENV3) pi@managerpi:~ $ cms burn image get full-2020-05-28
</code></pre></blockquote><p><strong>Step 4</strong>. Setup SD Card Writer</p><p>Plug your SD Card Writer into the Pi. Ensure you have an SD Card
inserted into your writer. Run the following command to find the path
to your SD Card.</p><pre><code>(ENV3) pi@managerpi:~ $ cms burn info
...
# ----------------------------------------------------------------------
# SD Cards Found
# ----------------------------------------------------------------------

+----------+----------------------+----------+-----------+-------+------------------+---------+-----------+-----------+
| Path     | Info                 | Readable | Formatted | Empty | Size             | Aaccess | Removable | Writeable |
+----------+----------------------+----------+-----------+-------+------------------+---------+-----------+-----------+
| /dev/sda | Generic Mass-Storage | True     | True      | False | 64.1 GB/59.7 GiB | True    | True      |           |
+----------+----------------------+----------+-----------+-------+------------------+---------+-----------+-----------+
</code></pre><blockquote><p><code>cms burn info</code> has other useful information, but for the purposes
of this guide we omit it.</p></blockquote><p>We can see from the information displayed that our SD card&rsquo;s path is
<code>/dev/sda</code>. Of course, this may vary.</p><h3 id=burning-multiple-sd-cards-with-a-single-burner>Burning Multiple SD Cards with a Single Burner</h3><p><strong>Step 0.</strong> Ensure the first SD card is inserted into the burner.</p><p>We can run <code>cms burn info</code> again as we did above to verify our SD
card is connected.</p><p><strong>Step 1.</strong> Burning the Cards</p><p><code>cms burn</code> supports logical incremenation of numbers/characters.</p><p>For example, <code>red00[1-2]</code> is interpreted by cms burn as <code>[red001, red002]</code>.
Similarly, <code>red[a-c]</code> is interpreted by cms burn as <code>[reda, redb, redc]</code>.</p><p>We can burn 2 SD cards as follows:</p><p><strong>!! WARNING VERIFY THE DEVICE IS CORRECT. REFER TO CMS BURN !!</strong></p><pre><code>(ENV3) pi@managerpi:~ $ cms burn create --hostname=red00[1-4] --ip=10.1.1.[2-5] --device=/dev/sda --tag=latest-lite
</code></pre><p>The user will be prompted to swap the SD cards after each card burn if
there are still remaining cards to burn.</p><p><strong>Step 2.</strong> Boot the cluster</p><p>After all cards are burned. Turn off the cluster, insert the cards, and turn
the cluster back on.</p><p>We can now proceed to the next section where we configure our bridge.</p><h3 id=connecting-pis-to-the-internet-via-bridge>Connecting Pis to the Internet via Bridge</h3><p>Figure 1 depicts how the network is set up with the help of the bridge command.</p><p><img src=https://github.com/cloudmesh/cloudmesh-pi-burn/raw/main/images/network-bridge.png alt></p><p>Figure 1: Networking Bridge</p><p><strong>Step 0.</strong> Review and Setup</p><p>At this point we assume that you have used <code>cms burn</code> to create all SD
cards for the Pi&rsquo;s with static IP addresses in the subnet range
<code>10.1.1.0/24</code> (excluding <code>10.1.1.1</code>. See step 1 for details)</p><p>We are also continuing to use <code>managerpi</code> (which is where we burn the
worker SD cards).</p><p>We will now use <code>cms bridge</code> to connect the worker Pis to the
internet. Let us again reference the diagram of our network setup. You
should now begin connecting your Pis together via network switch
(unmanaged or managed) if you have not done so already. Ensure that
<code>managerpi</code> is also connected into the network switch.</p><p>We will assign the eth0 interface of the <code>managerpi</code> to be 10.1.1.1, and it
will act as the default gateway for the workers. The workers IPs were set
during the create command.</p><p><strong>Step 1.</strong> Configuring our Bridge</p><p>We can easily create our bridge as follows.</p><pre><code>(ENV3) pi@managerpi:~ $ cms bridge create --interface='wlan0'
</code></pre><p>We should now reboot.</p><pre><code>(ENV3) pi@managerpi:~ $ sudo reboot
</code></pre><blockquote><p>Note the <code>--interface</code> option indicates the interface used by the
manager pi to access the internet. In this case, since we are using
WiFi, it is likely <code>wlan0</code>. Other options such as <code>eth0</code> and <code>eth1</code>
exist for ethernet connections.</p></blockquote><p><strong>Step 2.</strong> Verifying internet connection</p><p>We should now be able to see our workers.</p><pre><code>arp -a
</code></pre><p>Note it may take a few minutes for them to populate in the neighbor table. If
you want to speed this up try to ping them individually.</p><pre><code>ping red001
</code></pre><p>At this point, our workers should have internet access. Let us SSH
into one and ping google.com to verify. Ensure you have booted your workers and connected them to the same network switch as the manager.</p><pre><code>(ENV3) pi@managerpi:~ $ ssh red001

pi@red001:~ $ ping google.com
PING google.com (142.250.64.238) 56(84) bytes of data.
64 bytes from mia07s57-in-f14.1e100.net (142.250.64.238): icmp_seq=1 ttl=106 time=48.2 ms
64 bytes from mia07s57-in-f14.1e100.net (142.250.64.238): icmp_seq=2 ttl=106 time=48.3 ms
64 bytes from mia07s57-in-f14.1e100.net (142.250.64.238): icmp_seq=3 ttl=106 time=47.9 ms
64 bytes from mia07s57-in-f14.1e100.net (142.250.64.238): icmp_seq=4 ttl=106 time=47.10 ms
64 bytes from mia07s57-in-f14.1e100.net (142.250.64.238): icmp_seq=5 ttl=106 time=48.5 ms
^C
--- google.com `ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 9ms
rtt min/avg/max/mdev = 47.924/48.169/48.511/0.291 ms
</code></pre><p>Note how we are able to omit the pi user and .local extension. We have
successfuly configured our bridge. Our pis are now ready to cluster.</p><h2 id=set-up-of-the-ssh-keys-and-ssh-tunnel>Set up of the SSH keys and SSH tunnel</h2><p>One important aspect of a cluster is to setup authentication via ssh
in a convenient way, so we can easily login from the laptop to each of
the PI workers and the PI manager. Furthermore, we like to be able to
login from the PI manager to each of the workers. In addition, we like
to be able to login between the workers.</p><p>We have chosen a very simple setup while relying on ssh tunnel.</p><p>To simplify the setup of this we have developed a command <code>cms host</code>
that gathers and scatters keys onto all machines, as well as sets up
the tunnels.</p><p>It is essential that that the key on the laptop must not be password
less. This is also valid for any machine that is directly added to the
network such as in the mesh notwork.</p><p>To avoid password less keys we recommend you to use <code>ssh-add</code>
or <code>ssh-keychain</code> which will ask you for one.</p><p>The manual page for <code>cms host</code> is provided in the Manual Pages
section.</p><p><strong>Step 1.</strong> On the manager create ssh keys for each of the workers.</p><pre><code>(ENV3) pi@managerpi:~ $ cms host key create red00[1-3]
</code></pre><p><strong>Step 2.</strong> On the manager gather the worker, manager, and your laptop
public ssh keys into a file.</p><pre><code>(ENV3) pi@managerpi:~ $ cms host key gather red00[1-3],you@yourlaptop.local keys.txt
</code></pre><p><strong>Step 3.</strong> On the manager scatter the public keys to all the workers
and manager ~/.ssh/authorized_hosts file</p><pre><code>(ENV3) pi@managerpi:~ $ cms host key scatter red00[1-3],localhost keys.txt
</code></pre><p><strong>Step 4.</strong> Remove undeeded keys.txt file</p><pre><code>(ENV3) pi@managerpi:~ $ rm keys.txt
</code></pre><p><strong>Step 5.</strong> Verify SSH reachability from worker to manager and worker to worker.</p><pre><code>(ENV3) pi@managerpi:~ $ ssh red001
pi@red001:~ $ ssh managerpi.local
</code></pre><p>BUG: The workers still currently still need to use .local after names. This
will be resolved by the inventory create update.</p><pre><code>(ENV3) pi@managerpi:~ $ exit
pi@red001:~ $ ssh red002.local
pi@red002:~ $ exit
pi@red001:~ $ exit
</code></pre><p><strong>Step 6.</strong> (For Bridge setup) Create SSH tunnels on the manager
to enable ssh acces from your laptop to the workers</p><p>For now we manually install autossh, to test the new cms host tunnel
program. Later we add it to the main manager setup script.</p><pre><code>(ENV3) pi@managerpi:~ $ yes y | sudo apt install autossh
(ENV3) pi@managerpi:~ $ cms host tunnel create red00[1-3]
</code></pre><p><strong>Step 7.</strong> (For Bridge setup) Copy the specified command output to
your <code>~/.ssh/config</code> file on your laptop</p><pre><code>host tunnel create red00[1-3]

Using wlan0 IP = 192.168.1.17
Using cluster hostname = managerpi

Tunnels created.

Please place the following in your remote machine's (i.e. laptop)
`~/.ssh/config` file to alias simple ssh access (i.e. `ssh red001`).

# ----------------------------------------------------------------------
# copy to ~/.ssh/config on remote host (i.e laptop)
# ----------------------------------------------------------------------

Host red001
     HostName managerpi.local
     User pi
     Port 8001

Host red002
     HostName managerpi.local
     User pi
     Port 8002

Host red003
     HostName managerpi.local
     User pi
     Port 8003
</code></pre><blockquote><p>Note: We will in future provide an addition to the command so you
can remove and add
them directly from the commandline</p><pre><code>cms host tunnel config create red00[1-3]
cms host tunnel config delete red00[1-3]
</code></pre></blockquote><p><strong>Step 8.</strong> (For Bridge setup) Verify SSH reachability from the laptop
to workers</p><pre><code>you@yourlaptop:~ $ ssh red001
</code></pre><h2 id=manual-pages>Manual Pages</h2><h3 id=manual-page-for-the-burn-command>Manual Page for the <code>burn</code> command</h3><p>Note to execute the command on the commandline you have to type in
<code>cms burn</code> and not jsut <code>burn</code>.</p><pre><code>  burn firmware check
  burn firmware update
  burn install
  burn load --device=DEVICE
  burn format --device=DEVICE
  burn imager [TAG...]
  burn mount [--device=DEVICE] [--os=OS]
  burn unmount [--device=DEVICE] [--os=OS]
  burn network list [--ip=IP] [--used]
  burn network
  burn info [--device=DEVICE]
  burn image versions [--refresh] [--yaml]
  burn image ls
  burn image delete [--image=IMAGE]
  burn image get [--url=URL] [TAG...]
  burn backup [--device=DEVICE] [--to=DESTINATION]
  burn copy [--device=DEVICE] [--from=DESTINATION]
  burn shrink [--image=IMAGE]
  burn create [--image=IMAGE]
              [--device=DEVICE]
              [--hostname=HOSTNAME]
              [--ip=IP]
              [--sshkey=KEY]
              [--blocksize=BLOCKSIZE]
              [--dryrun]
              [--passwd=PASSWD]
              [--ssid=SSID]
              [--wifipassword=PSK]
              [--format]
              [--tag=TAG]
              [--inventory=INVENTORY]
              [--name=NAME]
  burn sdcard [TAG...] [--device=DEVICE] [--dryrun]
  burn set [--hostname=HOSTNAME]
           [--ip=IP]
           [--key=KEY]
  burn enable ssh
  burn wifi --ssid=SSID [--passwd=PASSWD] [--country=COUNTRY]
  burn check [--device=DEVICE]
  burn mac --hostname=HOSTNAME

Options:
  -h --help              Show this screen.
  --version              Show version.
  --image=IMAGE          The image filename,
                         e.g. 2019-09-26-raspbian-buster.img
  --device=DEVICE        The device, e.g. /dev/sdX
  --hostname=HOSTNAME    The hostname
  --ip=IP                The IP address
  --key=KEY              The name of the SSH key file
  --blocksize=BLOCKSIZE  The blocksise to burn [default: 4M]

Arguments:
    TAG                  Keyword tags to identify an image
                         [default: latest]
Files:
  This is not fully thought through and needs to be documented
  ~/.cloudmesh/images
    Location where the images will be stored for reuse

Description:
    cms burn create --inventory=INVENTORY --device=DEVICE --name=NAME

        Will refer to a specified cloudmesh inventory file (see cms help inventory).
        Will search the configurations for NAME inside of INVENTORY and will burn
        to DEVICE. Supports parameter expansion.

    cms burn create --passwd=PASSWD

         if the passwd flag is added the default password is
         queried from the commandline and added to all SDCards

         if the flag is omitted login via the password is
         disabled and only login via the sshkey is allowed

  Network

    cms burn network list

        Lists the ip addresses that are on the same network

         +------------+---------------+----------+-----------+
         | Name       | IP            | Status   | Latency   |
         |------------+---------------+----------+-----------|
         | Router     | 192.168.1.1   | up       | 0.0092s   |
         | iPhone     | 192.168.1.4   | up       | 0.061s    |
         | red01      | 192.168.1.46  | up       | 0.0077s   |
         | laptop     | 192.168.1.78  | up       | 0.058s    |
         | unkown     | 192.168.1.126 | up       | 0.14s     |
         | red03      | 192.168.1.158 | up       | 0.0037s   |
         | red02      | 192.168.1.199 | up       | 0.0046s   |
         | red        | 192.168.1.249 | up       | 0.00021s  |
         +------------+----------------+----------+-----------+

    cms burn network list [--used]

        Lists the used ip addresses as a comma separated parameter
        list

           192.168.50.1,192.168.50.4,...

    cms burn network address

        Lists the own network address

         +---------+----------------+----------------+
         | Label   | Local          | Broadcast      |
         |---------+----------------+----------------|
         | wlan0   | 192.168.1.12   | 192.168.1.255  |
         +---------+----------------+----------------+

    cms burn firmware check

        checks if the firmware on the Pi is up to date

    cms burn firmware update

        checks and updates the firmware on the Pi

    cms burn install

        installs a program to shrink img files. THis is
        useful, after you created a backup to make the
        backup smaller and allow faster burning in case of
        recovery

    cms burn load --device=DEVICE

        loads the sdcard into the USB drive. Thi sis similar to
        loading a cdrom drive. It s the opposite to eject

    cms burn format --device=DEVICE

        formats the SDCard in the specified device. Be
        careful it is the correct device.  cms burn info
        will help you to identifying it

    cms burn mount [--device=DEVICE] [--os=OS]

        mounts the file systems available on the SDCard

    cms burn unmount [--device=DEVICE] [--os=OS]

        unmounts the mounted file systems from the SDCard

    cms burn info [--device=DEVICE]

        provides useful information about the SDCard

    cms burn image versions [--refresh] [--yaml]

        The images that you like to burn onto your SDCard
        can be cached locally with the image command.  The
        available images for the PI can be found when
        using the --refresh option. If you do not specify
        it it reads a copy of the image list from our
        cache

    cms burn image ls

        Lists all downloaded images in our cache. You can
        download them with the cms burn image get command

    cms burn image delete [--image=IMAGE]

        deletes the specified image. The name can be found
        with the image ls command

    cms burn image get [--url=URL] [TAG...]

        downloads a specific image or the latest
        image. The tag are a number of words separated by
        a space that must occur in the tag that you find
        in the versions command

    cms burn backup [--device=DEVICE] [--to=DESTINATION]

        backs up a SDCard to the given location

    cms burn copy [--device=DEVICE] [--from=DESTINATION]

        copies the file form the destination on the SDCard
        this is the same as the SDCard command. we will in
        future remove one

    cms burn shrink [--image=IMAGE]

        shrinks the size of a backup or image file that
        is on your local file system. It can only be used
        for .img files

    cms burn create [--image=IMAGE]
                    [--device=DEVICE]
                    [--hostname=HOSTNAME]
                    [--ip=IP]
                    [--sshkey=KEY]
                    [--blocksize=BLOCKSIZE]
                    [--dryrun]
                    [--passwd=PASSWD]
                    [--ssid=SSID]
                    [--wifipassword=PSK]
                    [--format]

        This command  not only can format the SDCard, but
        also initializes it with specific values

    cms burn sdcard [TAG...] [--device=DEVICE] [--dryrun]

        this burns the sd card, see also copy and create

    cms burn set [--hostname=HOSTNAME]
                 [--ip=IP]
                 [--key=KEY]
                 [--mount=MOUNTPOINT]

        this sets specific values on the sdcard after it
        has ben created with the create, copy or sdcard
        command

        a --ssh is missing from this command

    cms burn enable ssh [--mount=MOUNTPOINT]

        this enables the ssh server once it is booted

    cms burn wifi --ssid=SSID [--passwd=PASSWD] [--country=COUNTRY]

        this sets the wifi ssid and password after the card
        is created, copied, or the sdcard is used.

        The option country option expects an ISO 3166-1
        two digit country code. The default is &quot;US&quot; and
        the option not required if suitable. See
        https://en.wikipedia.org/wiki/ISO_3166-1 for other
        countries.

    cms burn check [--device=DEVICE]

        this command lists the parameters that were set
        with the set or create command

Examples: ( \ is not shown)

   &gt; cms burn create --image=2019-09-26-raspbian-buster-lite
   &gt;                 --device=/dev/mmcblk0
   &gt;                 --hostname=red[5-7]
   &gt;                 --ip=192.168.1.[5-7]
   &gt;                 --sshkey=id_rsa

   &gt; cms burn image get latest

   &gt; cms burn image get https://downloads.raspberrypi.org/
   &gt;   raspbian_lite/images/
   &gt;   raspbian_lite-2018-10-11/2018-10-09-raspbian-stretch-lite.zip

   &gt; cms burn image delete 2019-09-26-raspbian-buster-lite


</code></pre><h3 id=manual-page-for-the-bridge-command>Manual Page for the <code>bridge</code> command</h3><p>Note to execute the command on the commandline you have to type in
<code>cms bridge</code> and not jsut <code>bridge</code>.</p><pre><code>
Options:
    --interface=INTERFACE  The interface name [default: eth1]
                           You can also specify wlan0 if you want
                           to bridge through WIFI on the manager
                           eth0 requires a USB to WIFI adapter

   --ip=IP  The ip address to assign on the eth0 interface,
            ie. the listening interface [default: 10.1.1.1]

  --dns=NAMESERVER  The ip address of a nameserver to set statically
           For example, --dns=8.8.8.8,8.8.4.4 will use google
           nameservers

Description:

  Command used to set up a bride so that all nodes route the traffic
  trough the manager PI.

  bridge create [--interface=INTERFACE] [--ip=IP] [--dns=NAMESERVER]
      creates the bridge on the current device.
      A reboot is required.

</code></pre><h3 id=manual-page-for-the-host-command>Manual Page for the <code>host</code> command</h3><p>Note to execute the command on the commandline you have to type in
<code>cms host</code> and not jsut <code>host</code>.</p><pre><code>    host scp NAMES SOURCE DESTINATION [--dryrun]
    host ssh NAMES COMMAND [--dryrun] [--output=FORMAT]
    host config NAMES [IPS] [--user=USER] [--key=PUBLIC]
    host check NAMES [--user=USER] [--key=PUBLIC]
    host key create NAMES [--user=USER] [--dryrun] [--output=FORMAT]
    host key list NAMES [--output=FORMAT]
    host key gather NAMES [--authorized_keys] [FILE]
    host key scatter NAMES FILE
    host tunnel create NAMES [--port=PORT]
    host mac NAMES [--eth] [--wlan] [--output=FORMAT]

This command does some useful things.

Arguments:
    FILE   a file name

Options:
    --dryrun   shows what would be done but does not execute
    --output=FORMAT  the format of the output
    --port=PORT starting local port for tunnel assignment

Description:

    host scp NAMES SOURCE DESTINATION

      TBD

    host ssh NAMES COMMAND

      runs the command on all specified hosts
      Example:
           ssh red[01-10] &quot;uname -a&quot;

    host key create NAMES
      create a ~/.ssh/id_rsa and id_rsa.pub on all hosts specified
      Example:
          ssh key create &quot;red[01-10]&quot;

    host key list NAMES

      list all id_rsa.pub keys from all hosts specifed
       Example:
           ssh key list red[01-10]

    host key gather HOSTS FILE

      gathers all keys from file FILE including the one from localhost.

          ssh key gather &quot;red[01-10]&quot; keys.txt

    host key scatter HOSTS FILE

      copies all keys from file FILE to authorized_keys on all hosts,
      but also makes sure that the users ~/.ssh/id_rsa.pub key is in
      the file.

      1) adds ~/.id_rsa.pub to the FILE only if its not already in it
      2) removes all duplicated keys

      Example:
          ssh key scatter &quot;red[01-10]&quot;

    host key scp NAMES FILE

      copies all keys from file FILE to authorized_keys on all hosts
      but also makes sure that the users ~/.ssh/id_rsa.pub key is in
      the file and removes duplicates, e.g. it calls fix before upload

      Example:
          ssh key list red[01-10] &gt; pubkeys.txt
          ssh key scp red[01-10] pubkeys.txt

    host config NAMES IPS [--user=USER] [--key=PUBLIC]

      generates an ssh config file tempalte that can be added to your
      .ssh/config file

      Example:
          cms host config &quot;red,red[01-03]&quot; &quot;198.168.1.[1-4]&quot; --user=pi

    host check NAMES [--user=USER] [--key=PUBLIC]

      This command is used to test if you can login to the specified
      hosts. It executes the hostname command and compares it.
      It provides a table  with a sucess column

      cms host check &quot;red,red[01-03]&quot;

          +-------+---------+--------+
          | host  | success | stdout |
          +-------+---------+--------+
          | red   | True    | red    |
          | red01 | True    | red01  |
          | red02 | True    | red02  |
          | red03 | True    | red03  |
          +-------+---------+--------+

    host tunnel create NAMES [--port=PORT]

      This command is used to create a persistent local port
      forward on the host to permit ssh tunnelling from the wlan to
      the physical network (eth). This registers an autossh service in
      systemd with the defualt port starting at 8001.

      Example:
          cms host tunnel create red00[1-3]

    host mac NAMES

      returns the list of mac addresses of the named pis.

</code></pre><h3 id=manual-page-for-the-pi-command>Manual Page for the <code>pi</code> command</h3><p>Note to execute the command on the commandline you have to type in
<code>cms pi</code> and not jsut <code>pi</code>.</p><p><strong>Note</strong>: Please note that the command <code>hadoop</code>, <code>spark</code>, and <code>k3</code> are
experimental and do not yet work. In fact the hadoop and spark
deployment are not fullfilling our standard and should not be
used. They will be put into a different command soon so they are not
confusing the used in this README. The command is likely to be called
<code>pidev</code>. Once the command is graduated it will be moved into the main
command pi.</p><p>There is some very usefull aditional information about how to use the
LED and temperature monitoring programs at</p><ul><li><a href=https://github.com/cloudmesh/cloudmesh-pi-cluster/blob/main/README.md>https://github.com/cloudmesh/cloudmesh-pi-cluster/blob/main/README.md</a></li></ul><pre><code>  pi led reset [NAMES]
  pi led (red|green) VALUE
  pi led (red|green) VALUE NAMES [--user=USER]
  pi led list NAMES [--user=USER]
  pi led blink (red|green) NAMES [--user=USER] [--rate=SECONDS]
  pi led sequence (red|green) NAMES [--user=USER] [--rate=SECONDS]
  pi temp NAMES [--rate=RATE] [--user=USER] [--output=FORMAT]
  pi free NAMES [--rate=RATE] [--user=USER] [--output=FORMAT]
  pi load NAMES [--rate=RATE] [--user=USER] [--output=FORMAT]
  pi script list SERVICE [--details]
  pi script list SERVICE NAMES
  pi script list
  pi wifi SSID [PASSWORD] [--dryrun]

This command does some useful things.

Arguments:
    FILE   a file name

Options:
    -f      specify the file


Description:

  This command switches on and off the LEDs of the specified
  PIs. If the hostname is omitted. It is assumed that the
  code is executed on a PI and its LED are set. To list the
  PIs LED status you can use the list command

  Examples:

      cms pi led list  &quot;red,red[01-03]&quot;

          lists the LED status of the given hosts

      cms pi led red off  &quot;red,red[01-03]&quot;

          switches off the led of the given PIs

      cms pi led red on  &quot;red,red[01-03]&quot;

          switches on the led of the given PIs

      cms pi led red blink  &quot;red,red[01-03]&quot;

          switches on and off the led of the given PIs

      cms pi led red sequence  &quot;red,red[01-03]&quot;

          goes in sequential order and switches on and off
          the led of the given PIs


</code></pre><h2 id=faq-and-hints>FAQ and Hints</h2><p>Here, we provide some usefule FAQs and hints.</p><h3 id=can-i-use-the-leds-on-the-pi-motherboard>Can I use the LEDs on the PI Motherboard?</h3><p>Typically this LED is used to communicate some system related
information. However <code>cms pi</code> can controll it to switch status on
and off. This is helpful if you like to showcase a particular state
in the PI. Please look at the manual page. An esample is</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cms pi led red off HOSTNAME
</code></pre></div><p>that when executed on the PI (on which you also must have cms
installed you switch the red LED off. For more options see the
manual page</p><h3 id=how-can-i-use-pycharm-to-edit-files-or-access-files-in-general-from-my-laptop-on-the-pi>How can I use pycharm, to edit files or access files in general from my Laptop on the PI?</h3><p>This is easily possible with the help of SSHFS. To install it we
refer you to See also: <a href=https://github.com/libfuse/sshfs>https://github.com/libfuse/sshfs</a> SSHFS: add
manager to <code>.ssh/config</code> onlocal machine</p><p>Let us assume you like to edit fles on a PI that you named <code>red</code></p><p>Please craete a `./.ssh/config file that containes the following:</p><pre><code> Host red
      HostName xxx.xxx.xxx.xxx
      User pi
      IdentityFile ~/.ssh/id_rsa.pub
</code></pre><p>Now let us create a directory in which we mount the remote PI directories</p><pre><code>mkdir manager
sshfs manager: manager -o auto_cache
</code></pre><h3 id=how-can-i-enhance-the-get-script>How can I enhance the <code>get</code> script?</h3><p>Instead of using the link</p><ul><li><a href=http://cloudmesh.github.io/get/pi>http://cloudmesh.github.io/get/pi</a></li></ul><p>please use</p><ul><li><a href=https://raw.githubusercontent.com/cloudmesh/get/main/pi>https://raw.githubusercontent.com/cloudmesh/get/main/pi</a></li></ul><p>This allows us to test also modifications to the get script before we
push them to the official community repository.</p><p>You can create a pull request at</p><ul><li><a href=https://github.com/cloudmesh/get/blob/main/pi/index.html>https://github.com/cloudmesh/get/blob/main/pi/index.html</a></li></ul><h3 id=can-i-use-a-mesh-network-for-the-setup>Can I use a Mesh Network for the setup?</h3><p>This section is still under development.</p><p>In case you have a Mesh Network, the setup can typically be even more
simplifies as we can attach the unmanaged router directly to a Mesh
node via a network cable. IN that case the node is directly connected
to the internet and uses the DHCP feature from the Mesh router (see
Figure 2).</p><p><img src=https://github.com/cloudmesh/cloudmesh-pi-burn/raw/main/images/network-mesh.png alt></p><p>Figure 2: Networking with Mesh network</p><p>You will not need the bridge command to setup the network.</p><h3 id=can-i-use-cms-burn-on-linux>Can I use cms burn on Linux?</h3><p>Not everything is supported.</p><p>To download the latest Raspberry Pi OS Lite image use</p><pre><code>cms burn image get latest-lite
</code></pre><p>To see what SDCard writers you have attached, you can use the command</p><pre><code>cms burn info
</code></pre><p>It will issue a probe of USB devices and see if SDCards can be found.</p><p>Identify the <code>/dev/sdX</code>, where X is a letter such as b,c,d, &mldr; It
will likely never be a.</p><p>sudo apt-get install pv
cms burn sdcard &ndash;dev=/dev/sdX
cms burn mount &ndash;device=/dev/sdX
cms burn enable ssh
cms burn unmount</p><p>Take the SDCard into the PI and set it up there. as documented.</p><h3 id=what-packages-do-i-need-to-run-the-info-command-on-macos>What packages do I need to run the info command on macOS</h3><pre><code>brew install libusb
nrew install pv
</code></pre><p><strong>Access to ext4</strong>: For the more advanced features of <code>burn</code> you will need full write access to the ext4 partition on your SDCard that is created when you burn it. Unfortunately the tools that used t be freely available see no longerto work properly, so you could use <a href=https://www.paragon-software.com/us/home/extfs-mac/>extFS for Mac by Paragon Software</a> which does cost $40 for a license.</p><h3 id=are-there-any-unit-tests>Are there any unit tests?</h3><p>As <code>cms burn</code> may delete format, delete, and remove files during unit
testing users are supposed to first review the tests before running
them. Please look at the source and see if you can run a test.</p><p>we have the following tests:</p><ul><li><code>pytest -v --capture=no tests/test_01_image.py</code><ul><li>This test removes files forom ~/.cloudmesh/cmburn/images</li><li>See also: <a href=https://github.com/cloudmesh/cloudmesh-pi-burn/blob/main/tests/test_01_image.py>test_01_image.py</a></li></ul></li></ul><h3 id=using-pi-imager-to-setup-a-manager-pi-with-headless-access>Using Pi Imager to setup a Manager Pi with headless access</h3><p>This FAQ will provide step by step instructions for burning and accessing a
headless manager pi. We will include instructions for either wifi access to
the pi or local ethernet connection.</p><p>If you have restricted WIFI that requires you to register you
devices MAC address via a web browser (think hotel wifi access page), you
might not be able to continue with a headless setup.</p><p>This FAQ references instructions from &lt;https://www.raspberrypi.
org/documentation/remote-access/ssh/> and &lt;https://www.raspberrypi.
org/documentation/configuration/wireless/headless.md></p><p><strong>Step 1.</strong></p><p>Download and install the Pi Imager software from raspberrypi.org &lt;https://www.
raspberrypi.org/software/>.</p><p><strong>Step 2.</strong></p><p>Launch the Pi Imager software, insert an SD card reader and SD card into
your laptop.</p><p><strong>Step 3.</strong></p><p>Choose the OS in the Pi Imager interface. We will use **Raspberry Pi OS
(32-BIT) with the Raspberry Pi desktop.</p><p><strong>Step 4.</strong></p><p>Choose the SD card in the Pi Imager interface. If you do not see an SD card
and a reader is plugged into your laptop, remove and re-insert the sd card
reader.</p><p><strong>Step 5.</strong></p><p>Push the &lsquo;Write&rsquo; button and confirm the settings to burn the OS to your SD card.
You may need to put in the SUDO password to burn the card. This will take
some time. USB 3.0 devices are faster than USB 2.0. Make sure your cable is
USB 3.0 as well.</p><p><strong>Step 6.</strong></p><p>Mount the SD card. This can be accomplished easily in Linux by unplugging
and replugging in the device. On Pi and Linux you should see the boot
partition at <strong>/media/$USER/boot</strong> (where user is you username) and on
MacOS at <strong>/Volumes/boot</strong>. I will use Linux for the example. Substitute as
required for MacOS.</p><p><strong>Step 7.</strong></p><p>Enable SSH access to the SD card. At the command prompt</p><pre><code>you@yourlaptop:~ $ cd /media/$USER/boot
you@yourlaptop:/media/$USER/boot $ touch ssh
</code></pre><p>This creates and empty file named ssh in the boot partition. On the first boot,
this enables the SSH service, and then empty ssh file will be
automatically deleted.</p><p><strong>Step 8.</strong></p><p>If only have wireless access to your Pi. You need to setup the wireless
configuration.</p><p>If you have restricted WIFI that requires you to register you
devices MAC address via a web browser (think hotel wifi access page), you
might not be able to continue with a headless setup.</p><p>Otherwise you can continue without this step if you have
ethernet access between your laptop and pi (either via switch or direct
cable). After plugging into a shared switch with the Pi, or directly to it, you
will need to make sure you see a link local address on your ethernet port on
your laptop. It should look something like 169.254.X.X. If you do not see
this investigate how to setup a link local ip on your OS.</p><pre><code>you@yourlaptop:/media/$USER/boot $ nano /media/$USER/boot/wpa_supplicant.conf

#Insert this into the file and save (CTRL-X, Y, Enter).

ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1
country=&lt;Insert 2 letter ISO 3166-1 country code here e.g. US&gt;

network={
 ssid=&quot;&lt;Name of your wireless LAN&gt;&quot;
 psk=&quot;&lt;Password for your wireless LAN&gt;&quot;
}
</code></pre><p><strong>Step 9.</strong></p><p>Unmount and eject the SD card.</p><pre><code>you@yourlaptop:~ $ sudo umount /media/$USER/boot
you@yourlaptop:~ $ sudo umount /media/$USER/rootfs
</code></pre><p><strong>Step 10.</strong></p><p>Boot a pi with the SD card. Wait a few minutes and try to access it via SSH.
Use the Raspi OS default username &ldquo;pi&rdquo; and &ldquo;raspberry&rdquo;.</p><pre><code>you@yourlaptop:~ $ ssh pi@raspberrypi.local
</code></pre><p><strong>Step 11.</strong></p><p>Change the password.</p><pre><code>pi@raspberrypi:~ $ passwd
</code></pre><p><strong>Step 12.</strong></p><p>Change the hostname to managerpi.</p><pre><code>pi@raspberrypi:~ $ sudo raspi-config
&lt;1. System Options&gt;
&lt;S4 Hostname&gt;
enter
managerpi
&lt;Finish&gt;
Would you like to reboot?
&lt;Yes&gt;
</code></pre><p><strong>Step 13.</strong></p><p>Wait a minute or two and reconnect. Now using the new hostname.</p><pre><code>you@yourlaptop:~ $ ssh pi@managerpi.local
</code></pre><p><strong>Step 14.</strong></p><p>You are all done. You are ready to proceed with <a href=#quickstart-for-bridged-wifi>Quickstart for Bridged
WiFi</a>. You will now witness the magic of how
cms burn automates this process for you.</p><pre><code>pi@managerpi:~ $ 
</code></pre><h3 id=single-card-burning>Single Card Burning</h3><p>Step 0. Ensure the SD card is inserted.</p><p>We can run <code>cms burn info</code> again as we did above to verify our
SD card is connected.</p><p>Step 1. Burning the SD Card</p><p>Choose a hostname for your card. We will use <code>red001</code> with ip
<code>10.1.1.2</code>. The IP address <code>10.1.1.1</code> is reserved for the burner pi
(ie. <code>managerpi</code>).</p><blockquote><p>Note we are using the subnet <code>10.1.1.0/24</code> in this guide. We
currently recommend you do the same, otherwise the WiFi bridge will
not configure correctly. We will change this in the future to
support other
<a href=https://www.arin.net/reference/research/statistics/address_filters/>Private IP Ranges</a></p></blockquote><p><strong>!! WARNING VERIFY THE DEVICE IS CORRECT. REFER TO CMS BURN !!</strong></p><pre><code>(ENV3) pi@managerpi:~ $ cms burn create --hostname=red001 --ip=10.1.1.2 --device=/dev/sda --tag=latest-lite
</code></pre><p>Wait for the card to burn. Once the process is complete, it is safe
to remove the SD card.</p><p>We can now proceed to <a href=#connecting-pis-to-the-internet-via-bridge>the bridge setup</a></p><h3 id=how-to-update-firmware>How to update firmware?</h3><p>To update the firmware reference the <a href=#https://www.raspberrypi.org/documentation/hardware/raspberrypi/booteeprom.md>raspi documentation</a></p><p>Or follow the simple instructions below.</p><pre><code>pi@managerpi:~ $ sudo apt update
pi@managerpi:~ $sudo apt full-upgrade
pi@managerpi:~ $sudo reboot
pi@managerpi:~ $sudo rpi-eeprom-update -a
pi@managerpi:~ $sudo reboot
</code></pre><h3 id=how-to-burn-a-cluster-using-linux>How to burn a cluster using Linux</h3><p>This will setup the same cluster seen in <a href=#quickstart-for-bridged-wifi>Quickstart for Bridged WiFi</a>
using only a Linux machine. Pi imager and a manual manager pi setup process is
not required using this method.</p><h4 id=prerequisites>Prerequisites</h4><ul><li>We recommend Python 3.8.2 Python or newer.</li><li>We recommend pip version 21.0.0 or newer</li><li>You have a private and public ssh key named ~/.ssh/id_rsa and ~/.
ssh/id_rsa.pub</li></ul><h4 id=install-cloudmesh>Install Cloudmesh</h4><p>Create a Python virtual environment <code>ENV3</code> in which to install cloudmesh.
This will keep cloudmesh and its dependecies seperate from your default
environment.</p><p>Always make sure to <code>source</code> this environment when working with cloudmesh.</p><pre><code>you@yourlaptop:~ $ python -m venv ~/ENV3
you@yourlaptop:~ $ source ~/ENV3/bin/activate 
you@yourlaptop:~ $ mkdir cm
you@yourlaptop:~ $ cd cm
you@yourlaptop:~ $ pip install cloudmesh-installer
you@yourlaptop:~ $ cloudmesh-installer get pi 
</code></pre><h4 id=create-a-manager-pi>Create a Manager Pi</h4><p><strong>Step 1.</strong> Get the latest RaspiOS-full image</p><pre><code>you@yourlaptop:~ $ cms burn image get latest-full
</code></pre><p><strong>Step 1.</strong> Insert and SD card to your laptop and identify the sd card device
name using:</p><pre><code>you@yourlaptop:~ $ cms burn info
</code></pre><p><strong>Step 2.</strong> Burn the manager pi.</p><blockquote><p><strong>!! WARNING VERIFY THE DEVICE IS CORRECT. REFER TO CMS BURN !!</strong></p></blockquote><pre><code>you@yourlaptop:~ $ cms burn create --hostname=managerpi --tag=latest-full--device=/dev/sdX --ssid=your_wifi --wifipassword=your_password
</code></pre><h4 id=create-the-workers>Create the workers</h4><p><strong>Step 1.</strong> Download the latest RaspiOS-lite image</p><pre><code>cms burn image get latest-lite
</code></pre><p><strong>Step 2.</strong> Burn the workers</p><blockquote><p><strong>!! WARNING VERIFY THE DEVICE IS CORRECT. REFER TO CMS BURN !!</strong></p></blockquote><pre><code>cms burn create --hostname=red00[1-4] --ip=10.1.1.[2-5] --device=/dev/sdX --tag=latest-lite
</code></pre><p><strong>Step 3.</strong> Turn off the cluster, insert sd cards, turn on cluster, and
connect to the manager pi.</p><pre><code>you@yourlaptop:~ $ ssh pi@mangerpi.local
</code></pre><p><strong>Step 4.</strong> Update and install cloudmesh on your manager pi</p><p>Update pip. The simple curl command below will generate an ssh-key,
update your system, and install cloudmesh.</p><pre><code>pi@managerpi:~ $ pip install pip -U
pi@managerpi:~ $ curl -Ls http://cloudmesh.github.io/get/pi | sh -                
pi@managerpi:~ $ sudo reboot
</code></pre><p><strong>Step 4.</strong> Enable the bridge on the mangerpi.</p><p>See section <a href=#connecting-pis-to-the-internet-via-bridge>Connecting Pis to the Internet via Bridge</a></p><p><strong>Step 5.</strong> Generate and distribute SSH keys</p><p>See section <a href=#set-up-of-the-ssh-keys-and-ssh-tunnel>Set up of the SSH keys and SSH tunnel</a></p><p><strong>Step 6.</strong> Enjoy your Pi cluster :)</p><h2 id=alternatives>Alternatives</h2><p>There are several alternatives to make the setup easier:</p><ul><li>Using Ansible after you have created the SDCards via PIImager. THis however
requires still the discovery of the hosts on the network and additional steps.</li><li>PiBakery can burn cards while allowing startup scripts and naming hosts.
Although the GUI is nice it is also a limiting factor as each card shoudl have
a different hostname</li><li>Using DHCP to get ip addresses automatically. THis is a solution we also used but
do not present here</li><li>PXE or network booting whch allsows you to boot from the network. For larger PI
clusters this requires multiple Servers so that the network is not everwhelmed.
Starting the cluster takes much longer.</li></ul><h3 id=what-is-the-status-of-the-implementation>What is the status of the implementation?</h3><table><thead><tr><th>Feature</th><th>PI</th><th>Ubuntu</th><th>Mac</th><th>Windows</th></tr></thead><tbody><tr><td>image versions</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>image ls</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>image delete</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>image get</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>info</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>network</td><td>+</td><td>+</td><td></td><td></td></tr><tr><td>backup</td><td>+</td><td>+</td><td>-</td><td></td></tr><tr><td>copy</td><td>+</td><td>+</td><td>-</td><td></td></tr><tr><td>shrink install</td><td>+</td><td>+</td><td></td><td></td></tr><tr><td>shrink</td><td>+</td><td>+</td><td></td><td></td></tr><tr><td>sdcard</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>mount</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>unmount</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>enable ssh</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>wifi</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>set</td><td>+</td><td>+</td><td>TODO1</td><td></td></tr><tr><td>create</td><td>TODO</td><td>TODO</td><td>TODO</td><td></td></tr><tr><td>check</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>format</td><td>+</td><td>+</td><td>+</td><td></td></tr><tr><td>firmware</td><td>a +</td><td>NA</td><td>NA</td><td>NA</td></tr></tbody></table><ul><li>for macOS, only the image commands have unit tests</li><li>firmware does not have a unit test</li></ul><p>empty = not yet implemented</p><ul><li><ul><li>= verified throug unit test either by ANthony or Gregor</li></ul></li><li><ul><li>broken</li></ul></li><li><p>TODO1 = todo for boot fs, rootfs not supported</p></li><li><p>2 = change and add &ndash;ssd so its uniform
1 = get needs to use the image versions refresh cache</p></li></ul><h2 id=how-can-i-contribute-contributing>How can I contribute Contributing</h2><p>The code uses a variety of cloudmesh components. This mainly includes</p><ul><li><a href=https://github.com/cloudmesh/cloudmesh-pi-burn>GitHub cloudmesh-pi-burn</a></li><li><a href=https://github.com/cloudmesh/cloudmesh-pi-cluster>GitHub cloudmesh-pi-cluster</a></li></ul><p>Additional cloudmesh components ar used. For example:</p><ul><li><a href=https://github.com/cloudmesh/cloudmesh-inventory>GitHub cloudmesh-pi-cluster</a></li><li><a href=https://github.com/cloudmesh/cloudmesh-common>GitHub cloudmesh-pi-cluster</a></li><li><a href=https://github.com/cloudmesh/cloudmesh-cmd5>GitHub cloudmesh-pi-cluster</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-117e294ab08651d2b766fb38d9b775c8>4 - Fortan</h1><div class=lead>In case you like to experiment with FORTRAN, you can install and use it.</div><div class="pageinfo pageinfo-primary"><p><strong>Learning Objective</strong></p><p>Python is in scientific computing still used. It is easy to set up on a Pi
so you can experiment with it.</p><ul><li>Set op Fortan</li><li>Run it on your PI</li></ul><p><strong>Topics Covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#installation>Installation</a></li><li><a href=#example>Example</a></li></ul></nav></div></div><p>You may find still that many scientific programs are written in fortran.
For some smaller fortran programs it is even possible to run them on a
Raspberry pi.</p><h2 id=installation>Installation</h2><p>Naturally you will need to install a fortran compiler,
which you can do with</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pi$ sudo apt-get install gfortran
</code></pre></div><h2 id=example>Example</h2><p>To test it out store the following program into <code>hello.f90</code></p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fortran data-lang=fortran><span style=color:#204a87;font-weight:700>program </span><span style=color:#000>hello</span>
    <span style=color:#204a87;font-weight:700>print</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;Hello World!&#34;</span>
<span style=color:#204a87;font-weight:700>end program </span><span style=color:#000>hello</span>
</code></pre></div><p>Now you can compile it with</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pi$ gfortran -o hello hello.f90
</code></pre></div><p>Execute it with</p><pre><code>pi$ hello
</code></pre></div><div class=td-content style=page-break-before:always><h1 id=pg-5e1c474153f0a656bff00af9fe4ad500>5 - Kubernetes</h1><div class=lead>Links related to running Kubernetes on a Pi cluster.</div><div class="pageinfo pageinfo-primary"><p><strong>Learning Objectives</strong></p><ul><li>Get informed what others do</li></ul><p><strong>Topics covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><ul><li><a href=#fedora>fedora</a></li><li><a href=#x86-via-docker>x86 via docker</a></li><li><a href=#raspbian>Raspbian</a></li><li><a href=#ubuntu>Ubuntu</a></li><li><a href=#rancheros>RancherOS</a></li><li><a href=#k8s>k8s</a></li><li><a href=#k3s>k3s</a></li><li><a href=#hyperoid-k3s>Hyperoid, k3s</a></li><li><a href=#turingpi>TuringPI</a></li><li><a href=#k3sup>k3sup</a></li><li><a href=#microk8>microk8</a></li><li><a href=#mediumcom>Medium.com</a></li></ul></li><li><a href=#services>Services</a><ul><li><a href=#azure-sql-edge>Azure SQL Edge</a></li></ul></li></ul></nav></div></div><p>TBD</p><ul><li>Identified as useful: <a href=https://opensource.com/article/20/3/kubernetes-raspberry-pi-k3s>https://opensource.com/article/20/3/kubernetes-raspberry-pi-k3s</a></li></ul><p>Complete to this format:</p><ul><li><a href=https://google.com>title, author, publication, date</a></li></ul><h3 id=fedora>fedora</h3><ul><li><a href=http://www.matthias-runge.de/2021/01/04/k8s-raspi4-fedora/>Kubernetes on Raspberry Pi 4 on Fedora, Matthias Runge, 04 January 2021</a>
kubespray</li><li><a href=https://archive.fosdem.org/2020/schedule/event/containers_k8s_arm64/attachments/slides/3806/export/events/attachments/containers_k8s_arm64/slides/3806/Cloud.pdf>apacheconna2017</a>
unclear firmware update, ppt, fedora</li></ul><h3 id=x86-via-docker>x86 via docker</h3><ul><li><a href=https://ajayp.app/posts/2020/06/raspberry-pi-4-kubernetes-cluster-with-x86-support/>Raspberry Pi 4 Kubernetes Cluster with x86 Support, Ajay Patel</a>
sd cards may fail on heavy RW</li></ul><h3 id=raspbian>Raspbian</h3><ul><li><a href=https://www.nocture.dk/2020/07/02/running-a-kubernetes-cluster-with-dashboard-on-raspberry-pi-4/>Running a Kubernetes Cluster with Dashboard on Raspberry Pi 4, Jeppe Andersen Blog, Nov 3, 2019</a>
dashboard</li><li><a href=https://github.com/codesqueak/k18srpi4>codesqueak/k18srpi4: Kubernetes on a Raspberry Pi 4 Cluster, Nov 3, 2019</a>
Raspbian Buster Lite / Kernel 4:19</li></ul><h3 id=ubuntu>Ubuntu</h3><ul><li><a href=https://ubuntu.com/blog/ubuntu-20-10-on-raspberry-pi-delivers-the-full-linux-desktop-and-micro-clouds>Ubuntu 20.10 on Raspberry Pi delivers the full Linux desktop and micro clouds, Ubuntu</a></li><li><a href=https://opensource.com/article/20/6/kubernetes-raspberry-pi>Build a Kubernetes cluster with the Raspberry Pi, Chris Collins, Opensource.com, 05 Jun 2020</a>
Ubuntu easy to follow, uses upto date ubuntu kubernetes install</li><li><a href=https://enterprisersproject.com/article/2020/9/how-raspberry-pi-and-kubernetes-go-together>How Raspberry Pi and Kubernetes work together, The Enterprisers Project</a>
just a pointer to Collins page</li><li><a href=https://ubuntu.com/tutorials/how-to-kubernetes-cluster-on-raspberry-pi#1-overview>How to build a Raspberry Pi Kubernetes cluster using MicroK8s, Ubuntu</a>
easy to follow, discusses cgroups in cmmdline.txt</li><li><a href=https://sirchia.cloud/posts/kubernetes-on-64-bit-os-raspberry-pi-4/>Kubernetes on 64 Bit OS Raspberry Pi 4 · Robert Sirchia</a>
Ubuntu 19.10</li><li><a href=https://viktorvan.github.io/kubernetes/kubernetes-on-raspberry-pi/>Running kubernetes on Raspberry Pi - Viktor Andersson</a>
Ubuntu likely outdated, has comment on large sd cards, mentions PI3 and Pi4</li><li><a href=https://github.com/mhausenblas/kube-rpi>mhausenblas/kube-rpi: Kubernetes on Raspberry Pi 4 with 64-bit OS</a>
tp link wireless to wired, ubuntu 19.10</li></ul><h3 id=rancheros>RancherOS</h3><ul><li><a href=https://rancher.com/docs/os/v1.x/en/installation/server/raspberry-pi/>Rancher Docs: Raspberry Pi</a>
Pi3</li><li><a href=https://www.pidramble.com/>Home, Raspberry Pi Dramble, Jeff Gerling Github</a>
Needs evaluation</li></ul><h3 id=k8s>k8s</h3><ul><li><a href=https://dev.to/anton2079/kubernetes-k8s-private-cloud-with-raspberry-pi-4s-k0d>Kubernetes (K8s) Private Cloud with Raspberry Pi 4s - DEV Community</a></li><li><a href=https://kubesail.com/blog/microk8s-raspberry-pi/>KubeSail Blog, MicroK8s on the Raspberry Pi 4</a></li></ul><h3 id=k3s>k3s</h3><ul><li><a href=https://github.com/k3s-io/k3s>k3s-io/k3s: Lightweight Kubernetes</a></li><li><a href=https://thenewstack.io/how-rancher-labs-k3s-makes-it-easy-to-run-kubernetes-at-the-edge/>How Rancher Labs’ K3s Makes It Easy to Run Kubernetes at the Edge – The New Stack</a></li><li><a href=https://k3s.io/>K3s: Lightweight Kubernetes</a></li><li><a href=https://thenewstack.io/tutorial-install-a-highly-available-k3s-cluster-at-the-edge/>Tutorial: Install a Highly Available K3s Cluster at the Edge – The New Stack</a></li><li><a href=https://www.dinofizzotti.com/blog/2020-05-09-raspberry-pi-cluster-part-2-todo-api-running-on-kubernetes-with-k3s/>Raspberry Pi Cluster Part 2: ToDo API running on Kubernetes with k3s</a></li><li><a href=https://blog.alexellis.io/self-hosting-kubernetes-on-your-raspberry-pi/>Self-hosting Kubernetes on your Raspberry Pi</a>
Reports Pi 3 have issues with kubernetes, k3s, arcade</li></ul><h3 id=hyperoid-k3s>Hyperoid, k3s</h3><ul><li><a href=https://www.jeffgeerling.com/blog/2019/everything-i-know-about-kubernetes-i-learned-cluster-raspberry-pis>Everything I know about Kubernetes I learned from a cluster of Raspberry Pis, Jeff Geerling, November 26, 2019</a>
k3s-ansible, nice videos, lists many other options for k*, requires to go in various parts</li><li><a href=https://www.civo.com/blog/k8s-vs-k3s>K3s vs k8s – What’s the difference between K8s and k3s - Civo.com</a></li></ul><h3 id=turingpi>TuringPI</h3><ul><li><a href=https://turingpi.com/installing-kubernetes-cluster-on-the-turingpi/>https://turingpi.com/installing-kubernetes-cluster-on-the-turingpi/</a></li></ul><h3 id=k3sup>k3sup</h3><ul><li><a href=https://blog.alexellis.io/raspberry-pi-homelab-with-k3sup/>Kubernetes Homelab with Raspberry Pi and k3sup</a></li></ul><h3 id=microk8>microk8</h3><ul><li><a href=https://microk8s.io/tutorials>MicroK8s tutorials</a></li></ul><h3 id=mediumcom>Medium.com</h3><p>Requires fee, if you read several articles (I have not read them)</p><ul><li><a href=https://alexellisuk.medium.com/walk-through-install-kubernetes-to-your-raspberry-pi-in-15-minutes-84a8492dc95a>Walk-through — install Kubernetes to your Raspberry Pi in 15 minutes, Alex Ellis, Mar 1, 2020·9, Medium</a>
requires access to medium.com</li><li><a href=https://medium.com/@jamieeduncan/kubernetes-1-17-on-a-raspberry-pi-4-cluster-4a259b804664>Kubernetes 1.17 on a Raspberry Pi 4 Cluster, Jamie Duncan, Dec 16, 2019·5, Medium</a></li><li><a href=https://www.reddit.com/r/kubernetes/comments/enojpn/step_by_stepguide_kubernetes_cluster_on_raspberry/>Step Stepguide — Kubernetes Cluster on Raspberry Pi 4B: kubernetes</a></li><li><a href=https://itnext.io/building-a-kubernetes-cluster-on-raspberry-pi-and-low-end-equipment-part-1-a768359fbba3>Building a kubernetes cluster on Raspberry Pi and low-end equipment. Part 1, Eduard Iskandarov, ITNEXT</a></li></ul><h2 id=services>Services</h2><h3 id=azure-sql-edge>Azure SQL Edge</h3><ul><li><a href=https://dbafromthecold.com/2020/11/30/building-a-raspberry-pi-cluster-to-run-azure-sql-edge-on-kubernetes/>Building a Raspberry Pi cluster to run Azure SQL Edge on Kubernetes, DBA From The Cold</a></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-54548d350555c4e237eb3dcc9c0aa01c>6 - Motherboard LED</h1><div class=lead>In some cases it it useful to visually display information about the state or programs on your cluster. The LEDs on the board can be used for that.</div><div class="pageinfo pageinfo-primary"><p><strong>Learning Objective</strong></p><p>Find out how to use the LEDs on the motherboard.</p><ul><li>Set op Fortan</li><li>Run it on your PI</li></ul><p><strong>Topics Covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#using-cloudmesh-to-control-the-leds>Using Cloudmesh to Control the LEDs</a><ul><li><a href=#examples>Examples</a></li><li><a href=#syntax>Syntax</a></li></ul></li><li><a href=#using-motherboard-leds-from-shell-scripts>Using Motherboard LEDs from Shell Scripts</a></li><li><a href=#controlling-the-motheboard-leds-remotely-via-ssh>Controlling the Motheboard LEDs remotely via ssh</a></li></ul></nav></div></div><h2 id=using-cloudmesh-to-control-the-leds>Using Cloudmesh to Control the LEDs</h2><p>The most convenient way to control the motherboard LEDs is via Cloudmesh.
It includes a special command that can even be called from a remote Pi using
ssh once you hve set up the cluster with cloudmesh.</p><p>This command switches on and off the LEDs of the specified
PIs. If the hostname is omitted. It is assumed that the
code is executed on a PI and its LED are set.</p><p>The specialty of this program is that it not only can query the current state,
but also allows you to set multiple LEDs on different motherboards at the same
time with a convenient parameterized syntax.</p><h3 id=examples>Examples</h3><p>We present a number of examples on how to use this command</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cms pi led list  <span style=color:#4e9a06>&#34;red,red[01-03]&#34;</span>
</code></pre></div><blockquote><p>lists the LED status of the given hosts</p></blockquote><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cms pi led red off  <span style=color:#4e9a06>&#34;red,red[01-03]&#34;</span>
</code></pre></div><blockquote><p>switches off the led of the given PIs</p></blockquote><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cms pi led red on  <span style=color:#4e9a06>&#34;red,red[01-03]&#34;</span>
</code></pre></div><blockquote><p>switches on the led of the given PIs</p></blockquote><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cms pi led red blink  <span style=color:#4e9a06>&#34;red,red[01-03]&#34;</span>
</code></pre></div><blockquote><p>switches on and off the led of the given PIs</p></blockquote><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cms pi led red sequence  <span style=color:#4e9a06>&#34;red,red[01-03]&#34;</span>
</code></pre></div><blockquote><p>goes in sequential order and switches on and off
the led of the given PIs</p></blockquote><h3 id=syntax>Syntax</h3><p>The command syntax is</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cms pi led reset <span style=color:#ce5c00;font-weight:700>[</span>NAMES<span style=color:#ce5c00;font-weight:700>]</span>
cms pi led <span style=color:#ce5c00;font-weight:700>(</span>red<span style=color:#000;font-weight:700>|</span>green<span style=color:#ce5c00;font-weight:700>)</span> VALUE
cms pi led <span style=color:#ce5c00;font-weight:700>(</span>red<span style=color:#000;font-weight:700>|</span>green<span style=color:#ce5c00;font-weight:700>)</span> VALUE NAMES <span style=color:#ce5c00;font-weight:700>[</span>--user<span style=color:#ce5c00;font-weight:700>=</span>USER<span style=color:#ce5c00;font-weight:700>]</span>
cmspi led list NAMES <span style=color:#ce5c00;font-weight:700>[</span>--user<span style=color:#ce5c00;font-weight:700>=</span>USER<span style=color:#ce5c00;font-weight:700>]</span>
</code></pre></div><h2 id=using-motherboard-leds-from-shell-scripts>Using Motherboard LEDs from Shell Scripts</h2><p>The Raspberry pi contains an LED that can also be used to provide us
with some information as to the status of the PI. It is usually used
for reporting the power status.</p><p>The green LED can be made blinking as follows in root</p><pre><code>echo 1 &gt; /sys/class/leds/led0/brightness
echo 0 &gt; /sys/class/leds/led0/brightness
</code></pre><h2 id=controlling-the-motheboard-leds-remotely-via-ssh>Controlling the Motheboard LEDs remotely via ssh</h2><p>Naturally this ac be done via a remote command if your ssh keys are
uploaded and your originating computer is added to the
authorized_keys. Now you can can control them via ssh</p><pre><code>ssh pi@red03 &quot;echo 1 &gt; led; sudo cp led /sys/class/leds/led0/brightness&quot;
ssh pi@red03 &quot;echo 0 &gt; led; sudo cp led /sys/class/leds/led0/brightness&quot;
</code></pre><p>This is extremely useful as it allows us to check if we the OS is
available and we can access the PI.</p><p>One strategy is to for example switch the light of, once it is booted,
so we can see which board may be in trouble.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-1cc7ff8c61beb4e85aade65b6717fe70>7 - Run at Boot</h1><div class=lead>To run programs at boot time you have several options. learn about them here.</div><div class="pageinfo pageinfo-primary"><p><strong>Learning Objective</strong></p><p>In case you need to run a program at boottime you have several option we
discuss here.</p><p><strong>Topics Covered</strong></p><div class=toc><nav id=TableOfContents><ul><li><a href=#run-commands-at-boot-time>Run Commands at Boot time</a></li><li><a href=#rclocal>rc.local</a></li><li><a href=#crontab>Crontab</a></li><li><a href=#references>References</a></li></ul></nav></div></div><h2 id=run-commands-at-boot-time>Run Commands at Boot time</h2><p>In many cases we need to provide configurations and programs that run
at boot time. A number of different methods exist to run commands and
programs at boot time.</p><p>We will be focusing here only a few of them</p><h2 id=rclocal>rc.local</h2><p>On your Pi you will find under <code>/etc/rc.local</code> a file in which you can
list programs that are started up at boot time. The programs should
success fully run and exit with the status 0, and they must not
continuously run in which case they need to be started in background.</p><p>To make sure you do not forget it, simply add the following line at
the end of your program</p><pre><code>exit 0
</code></pre><p>indicating that the start was successful. Programs in rc.local must
use the absolute file path.</p><h2 id=crontab>Crontab</h2><p>Crontab is a service the schedules jobs that can run at
various times repeatedly. For example we can use <code>crontab</code> to run
commands every hour, every day, every half hour or other time
intervals or at reboot.</p><p>To use crontab follow these steps</p><ol><li><p>Open a terminal and enter the command</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ crontab -e
</code></pre></div><p>If you are doing this for the first time, you will be asked to chose
an editor. Please, choose your favorite editor</p></li><li><p>To run the program at boot time, add the following line to the at the end
of the file</p><pre><code> @reboot &lt;command&gt;
</code></pre></li></ol><p>Let us look at an example and assume we have test.py program in your
home directory at <code>/home/pi/test.py</code>. Once you add it to crontab with</p><pre><code> @reboot python /home/pi/test.py
</code></pre><p>it will be run at boot time</p><p>It is important to provide the absolute path to the file. In case your
file produces output you need to redirect it into a file</p><pre><code>  @reboot python /home/pi/test.py &gt; /home/pi/test.log
</code></pre><ul><li>When the raspberry pi reboots, the program will run automatically.</li></ul><h2 id=references>References</h2><p>A good introduction to the various methods is provided at</p><ul><li><a href=https://www.dexterindustries.com/howto/run-a-program-on-your-raspberry-pi-at-startup/>https://www.dexterindustries.com/howto/run-a-program-on-your-raspberry-pi-at-startup/</a></li></ul><p>For more information on crontab see for example:</p><ul><li><a href=http://www.adminschoice.com/crontab-quick-reference>http://www.adminschoice.com/crontab-quick-reference</a></li></ul></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Gregor von Laszewski" aria-label="Gregor von Laszewski"><a class=text-white target=_blank rel="noopener noreferrer" href=https://laszewski.github.io><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Cloudmesh GitHub" aria-label="Cloudmesh GitHub"><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/cloudmesh><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Web Site GitHub" aria-label="Web Site GitHub"><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/cloudmesh/pi><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Cloudmesh Community Slack" aria-label="Cloudmesh Community Slack"><a class=text-white target=_blank rel="noopener noreferrer" href=https://cloudmesh-community.slack.com><i class="fab fa-slack"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Developer mailing list" aria-label="Developer mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=https://groups.google.com/g/piplanet><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 The Cloudmesh Projects, Gregor von Laszewski All Rights Reserved</small><p class=mt-2><a href=/pi/about/>About Cloudmesh Pi</a></p></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/pi/js/main.min.ff304e9949717e3408e45c6399bef7e0834e330b2cbb0a5a5ac54227112a59c0.js integrity="sha256-/zBOmUlxfjQI5Fxjmb734INOMwssuwpaWsVCJxEqWcA=" crossorigin=anonymous></script></body></html>